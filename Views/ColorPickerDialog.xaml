<Window x:Class="Terminalis.Views.ColorPickerDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Select Color" Height="500" Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{DynamicResource WindowBackground}">
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="32" ResizeBorderThickness="4" GlassFrameThickness="0"/>
    </WindowChrome.WindowChrome>
    <Grid Margin="15" Background="{DynamicResource WindowBackground}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Column="0" Text="Predefined Colors" FontSize="12" FontWeight="SemiBold" VerticalAlignment="Center" Foreground="{DynamicResource WindowForeground}"/>
            <Border Grid.Column="1" x:Name="ColorPreview" 
                    Width="60" Height="30"
                    BorderBrush="{DynamicResource BorderColor}" BorderThickness="1"
                    CornerRadius="2"
                    Background="{DynamicResource TextBoxBackground}">
                <TextBlock x:Name="HexTextBox" 
                           TextAlignment="Center" 
                           FontFamily="Consolas" 
                           FontSize="11"
                           FontWeight="Bold"
                           VerticalAlignment="Center"
                           Foreground="{DynamicResource TextBoxForeground}"/>
            </Border>
        </Grid>
        
        <Border Grid.Row="1" x:Name="PredefinedColorsPanel" 
                BorderBrush="{DynamicResource BorderColorLight}" BorderThickness="1" 
                Background="{DynamicResource TextBoxBackground}" 
                Padding="6" 
                Margin="0,0,0,15">
            <ItemsControl x:Name="PredefinedColorsItemsControl">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="8" Rows="3"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Width="30" Height="30" 
                                BorderBrush="{DynamicResource BorderColor}" 
                                BorderThickness="1" 
                                Margin="2"
                                Cursor="Hand"
                                MouseLeftButtonDown="ColorSwatch_MouseLeftButtonDown"
                                Tag="{Binding}">
                            <Border.Background>
                                <SolidColorBrush Color="{Binding}"/>
                            </Border.Background>
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="BorderBrush" Value="#0078D4"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Border>

        <TextBlock Grid.Row="2" Text="Color Gradient" FontSize="12" FontWeight="SemiBold" Margin="0,0,0,8" Foreground="{DynamicResource WindowForeground}"/>

        <Border Grid.Row="3" x:Name="ColorGradientBorder"
                Height="200"
                BorderBrush="{DynamicResource BorderColor}" BorderThickness="1"
                Margin="0,0,0,15"
                Background="{DynamicResource TextBoxBackground}"
                MouseLeftButtonDown="ColorGradient_MouseLeftButtonDown"
                MouseMove="ColorGradient_MouseMove"
                MouseLeftButtonUp="ColorGradient_MouseLeftButtonUp">
            <Canvas x:Name="ColorGradientCanvas" ClipToBounds="True">
                <Rectangle x:Name="ColorGradientRectangle"/>
                <Ellipse x:Name="ColorPickerIndicator" 
                         Width="12" Height="12"
                         Stroke="White" StrokeThickness="2"
                         Fill="Transparent"
                         Canvas.Left="0" Canvas.Top="0"
                         Visibility="Visible"/>
            </Canvas>
        </Border>

        <StackPanel Grid.Row="4">
            <Grid Margin="0,5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="50"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="50"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="Red:" VerticalAlignment="Center" FontSize="11" Foreground="{DynamicResource WindowForeground}"/>
                <Slider Grid.Column="1" x:Name="RedSlider" Minimum="0" Maximum="255" ValueChanged="Slider_ValueChanged" Margin="8,0" TickFrequency="1" IsSnapToTickEnabled="False"/>
                <TextBox Grid.Column="2" x:Name="RedTextBox" TextChanged="RedTextBox_TextChanged" VerticalContentAlignment="Center" Padding="3" FontSize="10" TextAlignment="Center"
                         Background="{DynamicResource TextBoxBackground}" Foreground="{DynamicResource TextBoxForeground}"
                         BorderBrush="{DynamicResource TextBoxBorder}"/>
            </Grid>
            <Grid Margin="0,5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="50"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="50"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="Green:" VerticalAlignment="Center" FontSize="11" Foreground="{DynamicResource WindowForeground}"/>
                <Slider Grid.Column="1" x:Name="GreenSlider" Minimum="0" Maximum="255" ValueChanged="Slider_ValueChanged" Margin="8,0" TickFrequency="1" IsSnapToTickEnabled="False"/>
                <TextBox Grid.Column="2" x:Name="GreenTextBox" TextChanged="GreenTextBox_TextChanged" VerticalContentAlignment="Center" Padding="3" FontSize="10" TextAlignment="Center"
                         Background="{DynamicResource TextBoxBackground}" Foreground="{DynamicResource TextBoxForeground}"
                         BorderBrush="{DynamicResource TextBoxBorder}"/>
            </Grid>
            <Grid Margin="0,5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="50"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="50"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="Blue:" VerticalAlignment="Center" FontSize="11" Foreground="{DynamicResource WindowForeground}"/>
                <Slider Grid.Column="1" x:Name="BlueSlider" Minimum="0" Maximum="255" ValueChanged="Slider_ValueChanged" Margin="8,0" TickFrequency="1" IsSnapToTickEnabled="False"/>
                <TextBox Grid.Column="2" x:Name="BlueTextBox" TextChanged="BlueTextBox_TextChanged" VerticalContentAlignment="Center" Padding="3" FontSize="10" TextAlignment="Center"
                         Background="{DynamicResource TextBoxBackground}" Foreground="{DynamicResource TextBoxForeground}"
                         BorderBrush="{DynamicResource TextBoxBorder}"/>
            </Grid>
            
            <Grid Margin="0,15,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Button Grid.Column="1" Content="OK" IsDefault="True" Click="OkButton_Click" Padding="20,6" Margin="0,0,10,0" MinWidth="75"
                        Background="{DynamicResource ButtonBackground}" Foreground="{DynamicResource ButtonForeground}"
                        BorderBrush="{DynamicResource ButtonBorder}"/>
                <Button Grid.Column="2" Content="Cancel" IsCancel="True" Click="CancelButton_Click" Padding="20,6" MinWidth="75"
                        Background="{DynamicResource ButtonBackground}" Foreground="{DynamicResource ButtonForeground}"
                        BorderBrush="{DynamicResource ButtonBorder}"/>
            </Grid>
        </StackPanel>
    </Grid>
</Window>

